{% extends "base.html" %}

{% block container %}
<main class="main" role="main">
  <section id="content" class="grid-container">
    <div class="grid-x">
      <div class="cell small-12 medium-8 large-8">
        <h1>Add a new organisation</h1>
        <br/>
      </div>
    </div>
    <div class="grid-x">
      <div class="cell small-12 medium-8 large-8">
        {% include 'partials/forms/errors.html' with form=form %}
        {% include 'partials/forms/errors.html' with form=claim_form %}

        <form method="post" class="organisation-form" enctype="multipart/form-data">
          {% csrf_token %}
          {% include 'organisation/forms/organisation_form.html' %}

          <div class="inline-claim">
            <input id="claim" type="checkbox" name="claim" {% if show_claim_form %} checked {% endif %}>
            <label for="claim">
              <b>I am a representative of this organisation</b>
              <span data-tooltip aria-haspopup="true" class="has-tip right" data-disable-hover="false" tabindex="2" title="By checking this box you claim editorial control of the organisation. This ensures only you can make changes without approval of the ALISS team.">
                <i class="fa fa-question-circle" aria-hidden="true"></i>
              </span>
            </label>
            <br/><br/>
            <div class="claim-form">
              {% include 'claim/forms/claim_form.html' with form=claim_form %}
            </div>
          </div>

          <br/>
          <div class="submit">
            <input type="submit" class="secondary" value="Submit">
          </div>
          <br/>
        </form>
      </div>

      <div class="cell small-12 medium-4 large-4">
        <div class="pad">
          {% include 'partials/breadcrumb.html' with progress=1 %}
        </div>
      </div>
    </div>
  </section>

  <hr class="clear" />
</main>
{% endblock %}

{% block before_body_close %}
<script type="text/javascript">
  $(document).ready(function(){
    var handleClaimForm = function(){
      var showForm = $("input#claim").prop("checked");
      $('div.inline-claim').toggleClass('active', showForm);
      $('div.inline-claim input, div.inline-claim textarea').prop({
        required: showForm });
    };
    $('input#claim').change(handleClaimForm);
    handleClaimForm();
  });
</script>
{% endblock %}