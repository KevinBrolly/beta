{% extends "base.html" %}

{% block container %}
<main class="main" role="main">
  <section class="grid-container" id="content">
    <div class="grid-x">
      <div class="cell small-12 medium-8">
        <h1>{{ organisation.name }}</h1>
        <div class="breadcrumbs">
          <a href="{% url 'organisation_detail' pk=service.organisation.pk %}">{{ service.organisation.name }}</a>
          <span class="sep"></span>
          <span>Update Service</span>
        </div>
      </div>
    </div>

    <div class="grid-x">
      <div class="cell small-12 medium-8">
        <form method="post">
          {% csrf_token %}
          {% include 'service/forms/service_form.html' with organisation=organisation %}
          <div class="submit">
            <input type="submit" value="Update Service">
          </div>
        </form>
      </div>
    </div>
  </section>
</main>
{% endblock %}

{% block before_body_close%}

<script type="text/javascript">
  $(document).ready(function(){

    serviceAreaClientValidation()

    var setupPickadate = function(){
      $('#id_start_date').pickadate({ formatSubmit: 'dd/mm/yyyy', hiddenName: true })
          .pickadate('picker')
          .set('select', new Date('{{ service.start_date|date:"Y/m/d" }}'));

      $('#id_end_date').pickadate({ formatSubmit: 'dd/mm/yyyy', hiddenName: true })
          .pickadate('picker')
          .set('select', new Date('{{ service.end_date|date:"Y/m/d" }}'));
    }

    var short_term_checkbox = $('#short_term_service')
    
    if (short_term_checkbox.is(':checked')){
      $('#short_term_form').show()
      setupPickadate()
    }
    else {
      $('#short_term_form').hide()
    }

    short_term_checkbox.click(function(box){
      if ($(this).is(':checked')){
        $('#short_term_form').show()
        setupPickadate()
      }
      else {
          $('#id_start_date').pickadate('picker').set('clear')
          $('#id_end_date').pickadate('picker').set('clear')
          $('#short_term_form').hide()
      }
    })

  });
</script>

{% endblock %}
